<!-- HTML PRINCIPAL -->
<app-header (imagesUploaded)="handleFilesUploaded($event)"></app-header>
<div class="flex h-screen">
  <!-- Contenedor principal con flexbox -->
  <div class="flex-1 flex flex-col">
    <!-- Contenedor para Toolbar y contenido principal -->
    <div class="flex h-full">
      <!-- Toolbar a la izquierda -->
      <div class="w-1/6 h-full bg-gray-100 border-r border-gray-300">
        <app-toolbar class="h-full"></app-toolbar>
      </div>

      <!-- Contenido principal -->
      <div class="flex-1 h-full p-4 overflow-auto">
        <app-main-area
          [receiveSaveCurrentImage]="receiveSaveCurrentImagefromAPP"
          [receiveSaveAllImages]="receiveSaveAllImagesfromAPP">
        </app-main-area>
      </div>
    </div>
  </div>

  <!-- Sidebar a la derecha -->
  <div class="w-1/6 h-full bg-gray-100 border-l border-gray-300">
    <app-sidebar class="h-full"
      (saveImageEvent)="handleSaveCurrentImage()"
      (saveAllImagesEvent)="handleSaveAllImages()">>
    </app-sidebar>
  </div>
</div>

<!-- Spinner -->
<div *ngIf="showSpinner" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
  <div class="border-t-4 border-blue-500 rounded-full w-32 h-32 animate-spin"></div>
</div>

<!-- Modal -->
<div *ngIf="isModalVisible" class="fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50">
  <div style="overflow-y: auto; max-height: 65%;" class="bg-white rounded-lg shadow-lg max-w-md overflow-auto">
      <h2 style="position: sticky; top: 0px; background-color: white; padding: 15px;" class="text-lg font-bold mb-4">Configuración de Videos</h2>
      <ng-container *ngIf="videoFilesWithSettings.length > 0; else noVideos">
        <div *ngFor="let fileSettings of videoFilesWithSettings; let i = index" class="mb-4 border-b pb-4 p-4">
          <div class="flex items-center mb-2">
            <span class="ml-2">File name:</span>
            <div class="ml-2">{{fileSettings.file.name}}</div>
          </div>
          <div class="flex items-center mb-2">
            <span class="ml-2">Frames per second:</span>
            <input class="ml-2" type="number" [(ngModel)]="fileSettings.captureInterval" min="1" class="border px-2 py-1 rounded" placeholder="Capture Interval">
          </div>
          <div class="flex justify-end">
            <button class="bg-red-500 text-white px-4 py-2 rounded" (click)="removeFile(i)">Eliminar</button>
          </div>
        </div>
      </ng-container>
      <ng-template #noVideos>
        <div>¿Enviar solo las imagenes?</div>
      </ng-template>
      

      <div style="position: sticky; bottom: 0px; background-color: white;" class="flex justify-end p-4 mt-4">
          <button class="bg-blue-500 text-white px-4 py-2 rounded mr-2" (click)="confirm()">Aceptar</button>
          <button class="bg-gray-300 px-4 py-2 rounded" (click)="cancel()">Cancelar</button>
      </div>
  </div>
</div>

<!-- Imprimir el valor de getshowSpinner 
<div class="fixed bottom-0 right-0 p-4 bg-white text-black">
  getshowSpinner: {{ showSpinner }}
</div>-->